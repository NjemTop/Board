FROM python:3.10-alpine

# Устанавливаем SQLite
RUN apk add --no-cache sqlite

# Устанавливаем Datasette
RUN pip install --upgrade pip
RUN pip install datasette

# Копируем файл базы данных в новый контейнер
COPY ./DataBase/database.db /var/lib/sqlite/

# Добавляем healthcheck
HEALTHCHECK CMD sqlite3 /var/lib/sqlite/database.db "SELECT 1"

# Задаем рабочую директорию
WORKDIR /var/lib/sqlite/

# Устанавливаем точку входа
CMD ["datasette", "serve", "--host", "0.0.0.0", "--port", "5000", "database.db"]
